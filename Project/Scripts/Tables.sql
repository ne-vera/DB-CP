DROP TABLE "USERS";
DROP TABLE ARTISTS;
DROP TABLE ALBUMS;
DROP TABLE SONGS;
DROP TABLE ARTIST_SONG;
DROP TABLE PLAYLISTS;
DROP TABLE PLAYLIST_SONG;

--1
CREATE TABLE "USERS"(
                    USER_ID INT GENERATED BY DEFAULT AS IDENTITY,
                    USER_LOGIN NVARCHAR2(50) UNIQUE,
                    USER_PASSWORD NVARCHAR2(255) NOT NULL,
                    PRIMARY KEY(USER_ID));
--2
CREATE TABLE ARTISTS(
                    ARTIST_ID INT GENERATED BY DEFAULT AS IDENTITY,
                    ARTIST_NAME NVARCHAR2(50) NOT NULL,
                    ARTIST_PHOTO BLOB,
                    PRIMARY KEY(ARTIST_ID));

--3
CREATE TABLE ALBUMS(
                    ALBUM_ID INT GENERATED BY DEFAULT AS IDENTITY,
                    ALBUM_NAME NVARCHAR2(50) NOT NULL,
                    ALBUM_RELEASE_DATE DATE,
                    ALBUM_COVER BLOB,
                    PRIMARY KEY(ALBUM_ID));

--4
CREATE TABLE SONGS(
                SONG_ID INT GENERATED BY DEFAULT AS IDENTITY,
                SONG_NAME NVARCHAR2(50) NOT NULL,
                SONG_FILE BLOB NOT NULL,
                ARTIST_ID INT,
                FOREIGN KEY (ARTIST_ID) REFERENCES ARTISTS(ARTIST_ID) ON DELETE CASCADE,
                PRIMARY KEY(SONG_ID));
--5
CREATE TABLE ALBUM_SONG(
                ALBUM_ID INT,
                SONG_ID INT,
                FOREIGN KEY (ALBUM_ID) REFERENCES ALBUMS(ALBUM_ID) ON DELETE CASCADE,
                FOREIGN KEY (SONG_ID) REFERENCES SONGS(SONG_ID) ON DELETE CASCADE,
                PRIMARY KEY(ALBUM_ID, SONG_ID));
--6
CREATE TABLE PLAYLISTS(
                PLAYLIST_ID INT GENERATED BY DEFAULT AS IDENTITY,
                PLAYLIST_NAME NVARCHAR2(50) NOT NULL,
                USER_ID INT NOT NULL,
                PLAYLIST_DESCRIPTION NVARCHAR2(255),
                PLAYLIST_COVER BLOB,
                FOREIGN KEY (USER_ID) REFERENCES "USERS"(USER_ID) ON DELETE CASCADE,
                PRIMARY KEY(PLAYLIST_ID));
                
--7
CREATE TABLE PLAYLIST_SONG(
                PLAYLIST_ID INT,
                SONG_ID INT,
                FOREIGN KEY (PLAYLIST_ID) REFERENCES PLAYLISTS(PLAYLIST_ID) ON DELETE CASCADE,
                FOREIGN KEY (SONG_ID) REFERENCES SONGS(SONG_ID) ON DELETE CASCADE,
                PRIMARY KEY(PLAYLIST_ID, SONG_ID));

--8
CREATE TABLE FAVOURITE_SONGS (
                USER_ID INT,
               SONG_ID INT,
               FOREIGN KEY (SONG_ID) REFERENCES SONGS(SONG_ID) ON DELETE CASCADE,
               FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID) ON DELETE CASCADE,
               PRIMARY KEY(USER_ID, SONG_ID));

--9
CREATE TABLE FOLLOWED_ARTISTS (
              USER_ID INT,
              ARTIST_ID INT,
              FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID) ON DELETE CASCADE,
              FOREIGN KEY (ARTIST_ID) REFERENCES ARTISTS(ARTIST_ID) ON DELETE CASCADE,
              PRIMARY KEY(USER_ID, ARTIST_ID));